{"ast":null,"code":"var _jsxFileName = \"/Users/eruei/repo/euler/client/src/utils/use-auth.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\n// from https://usehooks.com/useAuth/\nimport React, { useState, useEffect, useContext, createContext } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext(null);\nexport function AuthProvider(_ref) {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const auth = useAuthProvider();\n  console.log(\"DEBUG\");\n  console.log(auth);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: auth,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 10\n  }, this);\n}\n\n_s(AuthProvider, \"U5QEqN6sgp/9Kus+ung4cQwYnRk=\", false, function () {\n  return [useAuthProvider];\n});\n\n_c = AuthProvider;\nexport const useAuth = () => {\n  _s2();\n\n  return useContext(AuthContext);\n};\n\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nfunction useAuthProvider() {\n  _s3();\n\n  const [user, setUser] = useState(null);\n  console.log(\"Use effect -----------\");\n  const storedUser = JSON.parse(sessionStorage.getItem(\"user\"));\n\n  if (user) {\n    console.log(\"user found in session storage:\");\n    setUser(user);\n    console.log(user);\n  } else {\n    console.log(\"user not found in session storage.\");\n    setUser(null);\n  }\n\n  console.log(\"----------------------\");\n\n  const login = (username, password) => {\n    axios.post(process.env.REACT_APP_API_URL + \"/users/login\", {\n      username: username,\n      password: password\n    }, {\n      withCredentials: true\n    }).then(function (response) {\n      setUser(response.data);\n      sessionStorage.setItem(\"user\", JSON.stringify(response.data));\n      return response.data;\n    }).catch(function (error) {\n      console.log(\"use-auth: Login Failed\");\n      return null;\n    });\n  };\n\n  const register = (email, password) => {\n    return \"\"; //return user\n  };\n\n  const logout = () => {\n    setUser(null);\n    console.log(\"use-auth: logging out\");\n    return \"\";\n  };\n\n  return {\n    user,\n    login,\n    logout,\n    register\n  };\n}\n\n_s3(useAuthProvider, \"Iei9RGtZU29Y1RhBe1sbfh/MntA=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"sources":["/Users/eruei/repo/euler/client/src/utils/use-auth.js"],"names":["React","useState","useEffect","useContext","createContext","axios","AuthContext","AuthProvider","children","auth","useAuthProvider","console","log","useAuth","user","setUser","storedUser","JSON","parse","sessionStorage","getItem","login","username","password","post","process","env","REACT_APP_API_URL","withCredentials","then","response","data","setItem","stringify","catch","error","register","email","logout"],"mappings":";;;;;AAAA;AAEA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,EAAiDC,aAAjD,QAAsE,OAAtE;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,WAAW,gBAAGF,aAAa,CAAC,IAAD,CAAjC;AAEA,OAAO,SAASG,YAAT,OAAoC;AAAA;;AAAA,MAAd;AAAEC,IAAAA;AAAF,GAAc;AACzC,QAAMC,IAAI,GAAGC,eAAe,EAA5B;AAEAC,EAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;AACA,sBAAO,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAEA,IAA7B;AAAA,cAAoCD;AAApC;AAAA;AAAA;AAAA;AAAA,UAAP;AACD;;GANeD,Y;UACDG,e;;;KADCH,Y;AAQhB,OAAO,MAAMM,OAAO,GAAG,MAAM;AAAA;;AAC3B,SAAOV,UAAU,CAACG,WAAD,CAAjB;AACD,CAFM;;IAAMO,O;;AAIb,SAASH,eAAT,GAA2B;AAAA;;AACzB,QAAM,CAACI,IAAD,EAAOC,OAAP,IAAkBd,QAAQ,CAAC,IAAD,CAAhC;AAEAU,EAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACA,QAAMI,UAAU,GAAGC,IAAI,CAACC,KAAL,CAAWC,cAAc,CAACC,OAAf,CAAuB,MAAvB,CAAX,CAAnB;;AACA,MAAIN,IAAJ,EAAU;AACRH,IAAAA,OAAO,CAACC,GAAR,CAAY,gCAAZ;AACAG,IAAAA,OAAO,CAACD,IAAD,CAAP;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAYE,IAAZ;AACD,GAJD,MAIO;AACLH,IAAAA,OAAO,CAACC,GAAR,CAAY,oCAAZ;AACAG,IAAAA,OAAO,CAAC,IAAD,CAAP;AACD;;AACDJ,EAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;;AAEA,QAAMS,KAAK,GAAG,CAACC,QAAD,EAAWC,QAAX,KAAwB;AACpClB,IAAAA,KAAK,CACFmB,IADH,CAEIC,OAAO,CAACC,GAAR,CAAYC,iBAAZ,GAAgC,cAFpC,EAGI;AACEL,MAAAA,QAAQ,EAAEA,QADZ;AAEEC,MAAAA,QAAQ,EAAEA;AAFZ,KAHJ,EAOI;AAAEK,MAAAA,eAAe,EAAE;AAAnB,KAPJ,EASGC,IATH,CASQ,UAAUC,QAAV,EAAoB;AACxBf,MAAAA,OAAO,CAACe,QAAQ,CAACC,IAAV,CAAP;AACAZ,MAAAA,cAAc,CAACa,OAAf,CAAuB,MAAvB,EAA+Bf,IAAI,CAACgB,SAAL,CAAeH,QAAQ,CAACC,IAAxB,CAA/B;AACA,aAAOD,QAAQ,CAACC,IAAhB;AACD,KAbH,EAcGG,KAdH,CAcS,UAAUC,KAAV,EAAiB;AACtBxB,MAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACA,aAAO,IAAP;AACD,KAjBH;AAkBD,GAnBD;;AAoBA,QAAMwB,QAAQ,GAAG,CAACC,KAAD,EAAQd,QAAR,KAAqB;AACpC,WAAO,EAAP,CADoC,CAEpC;AACD,GAHD;;AAIA,QAAMe,MAAM,GAAG,MAAM;AACnBvB,IAAAA,OAAO,CAAC,IAAD,CAAP;AACAJ,IAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACA,WAAO,EAAP;AACD,GAJD;;AAMA,SAAO;AACLE,IAAAA,IADK;AAELO,IAAAA,KAFK;AAGLiB,IAAAA,MAHK;AAILF,IAAAA;AAJK,GAAP;AAMD;;IAnDQ1B,e","sourcesContent":["// from https://usehooks.com/useAuth/\n\nimport React, { useState, useEffect, useContext, createContext } from \"react\";\nimport axios from \"axios\";\n\nconst AuthContext = createContext(null);\n\nexport function AuthProvider({ children }) {\n  const auth = useAuthProvider();\n\n  console.log(\"DEBUG\");\n  console.log(auth);\n  return <AuthContext.Provider value={auth}>{children}</AuthContext.Provider>;\n}\n\nexport const useAuth = () => {\n  return useContext(AuthContext);\n};\n\nfunction useAuthProvider() {\n  const [user, setUser] = useState(null);\n\n  console.log(\"Use effect -----------\");\n  const storedUser = JSON.parse(sessionStorage.getItem(\"user\"));\n  if (user) {\n    console.log(\"user found in session storage:\");\n    setUser(user);\n    console.log(user);\n  } else {\n    console.log(\"user not found in session storage.\");\n    setUser(null);\n  }\n  console.log(\"----------------------\");\n\n  const login = (username, password) => {\n    axios\n      .post(\n        process.env.REACT_APP_API_URL + \"/users/login\",\n        {\n          username: username,\n          password: password,\n        },\n        { withCredentials: true }\n      )\n      .then(function (response) {\n        setUser(response.data);\n        sessionStorage.setItem(\"user\", JSON.stringify(response.data));\n        return response.data;\n      })\n      .catch(function (error) {\n        console.log(\"use-auth: Login Failed\");\n        return null;\n      });\n  };\n  const register = (email, password) => {\n    return \"\";\n    //return user\n  };\n  const logout = () => {\n    setUser(null);\n    console.log(\"use-auth: logging out\");\n    return \"\";\n  };\n\n  return {\n    user,\n    login,\n    logout,\n    register,\n  };\n}\n"]},"metadata":{},"sourceType":"module"}