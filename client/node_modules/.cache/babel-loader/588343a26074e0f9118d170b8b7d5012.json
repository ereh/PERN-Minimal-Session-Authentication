{"ast":null,"code":"var _jsxFileName = \"/Users/eruei/repo/euler/client/src/utils/use-auth.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\n// from https://usehooks.com/useAuth/\nimport React, { useState, useEffect, useContext, createContext } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nexport const useAuth = () => {\n  _s();\n\n  return useContext(AuthContext);\n};\n\n_s(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nexport function AuthProvider(_ref) {\n  _s2();\n\n  let {\n    children\n  } = _ref;\n  const [user, setUser] = useState();\n  useEffect(() => {\n    console.log(\"useEffect\"); // declare the data fetching function\n\n    const meQuery = async () => {\n      const response = await axios.post(process.env.REACT_APP_API_URL + \"/users/login\", {\n        username: username,\n        password: password\n      }, {\n        withCredentials: true\n      });\n    };\n\n    try {\n      console.log(\"making a Me query!\");\n      axios.get(process.env.REACT_APP_API_URL + \"/users/me\", {\n        withCredentials: true\n      }).then(response => {\n        console.log(\"maawefawefuery!\");\n\n        if (response.data) {\n          console.log(\"Received a user:\");\n          console.log(response.data);\n          setUser(response.data);\n        } else {\n          setUser(null);\n          console.log(\"Not logged in\");\n        }\n      });\n    } catch (error) {\n      console.log(error);\n    } // console.log(\"Use effect Started\");\n    // const user = JSON.parse(sessionStorage.getItem(\"user\"));\n    // if (user) {\n    //   console.log(\"user found in session storage:\");\n    //   setUser(user);\n    //   console.log(user);\n    // } else {\n    //   console.log(\"user not found in session storage.\");\n    //   setUser(null);\n    // }\n    // console.log(user);\n\n\n    console.log(\"useEffect Ends\");\n  }, []);\n\n  const login = async (username, password) => {\n    try {\n      const response = await axios.post(process.env.REACT_APP_API_URL + \"/users/login\", {\n        username: username,\n        password: password\n      }, {\n        withCredentials: true\n      });\n      setUser(response.data);\n      return response.data;\n    } catch (error) {\n      return null;\n    }\n  };\n\n  const register = (email, password) => {\n    console.log(\"register() is NOT IMPLEMENTED\");\n    return null; //return user\n  };\n\n  const logout = async () => {\n    try {\n      const response = await axios.get(process.env.REACT_APP_API_URL + \"/users/logout\", {\n        withCredentials: true\n      });\n      setUser(null);\n    } catch (error) {\n      return null;\n    }\n  };\n\n  const auth = {\n    user,\n    login,\n    logout,\n    register\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: auth,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 10\n  }, this);\n}\n\n_s2(AuthProvider, \"hT6C72rcbfRUedrDq+TPaFfRI/M=\");\n\n_c = AuthProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"sources":["/Users/eruei/repo/euler/client/src/utils/use-auth.js"],"names":["React","useState","useEffect","useContext","createContext","axios","AuthContext","useAuth","AuthProvider","children","user","setUser","console","log","meQuery","response","post","process","env","REACT_APP_API_URL","username","password","withCredentials","get","then","data","error","login","register","email","logout","auth"],"mappings":"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","sourcesContent":["// from https://usehooks.com/useAuth/\n\nimport React, { useState, useEffect, useContext, createContext } from \"react\";\nimport axios from \"axios\";\n\nconst AuthContext = createContext();\n\nexport const useAuth = () => {\n  return useContext(AuthContext);\n};\n\nexport function AuthProvider({ children }) {\n  const [user, setUser] = useState();\n\n  useEffect(() => {\n    console.log(\"useEffect\");\n\n    // declare the data fetching function\n    const meQuery = async () => {\n      const response = await axios.post(\n        process.env.REACT_APP_API_URL + \"/users/login\",\n        {\n          username: username,\n          password: password,\n        },\n        { withCredentials: true }\n      );\n    };\n\n    try {\n      console.log(\"making a Me query!\");\n      axios\n        .get(process.env.REACT_APP_API_URL + \"/users/me\", {\n          withCredentials: true,\n        })\n        .then((response) => {\n          console.log(\"maawefawefuery!\");\n          if (response.data) {\n            console.log(\"Received a user:\");\n            console.log(response.data);\n            setUser(response.data);\n          } else {\n            setUser(null);\n            console.log(\"Not logged in\");\n          }\n        });\n    } catch (error) {\n      console.log(error);\n    }\n    // console.log(\"Use effect Started\");\n    // const user = JSON.parse(sessionStorage.getItem(\"user\"));\n    // if (user) {\n    //   console.log(\"user found in session storage:\");\n    //   setUser(user);\n    //   console.log(user);\n    // } else {\n    //   console.log(\"user not found in session storage.\");\n    //   setUser(null);\n    // }\n\n    // console.log(user);\n    console.log(\"useEffect Ends\");\n  }, []);\n\n  const login = async (username, password) => {\n    try {\n      const response = await axios.post(\n        process.env.REACT_APP_API_URL + \"/users/login\",\n        {\n          username: username,\n          password: password,\n        },\n        { withCredentials: true }\n      );\n      setUser(response.data);\n      return response.data;\n    } catch (error) {\n      return null;\n    }\n  };\n  const register = (email, password) => {\n    console.log(\"register() is NOT IMPLEMENTED\");\n    return null;\n    //return user\n  };\n  const logout = async () => {\n    try {\n      const response = await axios.get(\n        process.env.REACT_APP_API_URL + \"/users/logout\",\n        { withCredentials: true }\n      );\n      setUser(null);\n    } catch (error) {\n      return null;\n    }\n  };\n\n  const auth = {\n    user,\n    login,\n    logout,\n    register,\n  };\n\n  return <AuthContext.Provider value={auth}>{children}</AuthContext.Provider>;\n}\n"]},"metadata":{},"sourceType":"module"}